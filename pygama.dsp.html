<!DOCTYPE html>
<html class="writer-html5" lang="python" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pygama.dsp package &mdash; pygama v0.6 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pygama.io package" href="pygama.io.html" />
    <link rel="prev" title="pygama.analysis package" href="pygama.analysis.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pygama
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing pygama</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="pygama.html">Package API reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="pygama.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pygama.analysis.html">pygama.analysis package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">pygama.dsp package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pygama.dsp.ProcessingChain">pygama.dsp.ProcessingChain module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pygama.dsp.WaveformBrowser">pygama.dsp.WaveformBrowser module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pygama.dsp.build_processing_chain">pygama.dsp.build_processing_chain module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pygama.dsp.dsp_optimize">pygama.dsp.dsp_optimize module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pygama.dsp.processors">pygama.dsp.processors module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pygama.dsp.units">pygama.dsp.units module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pygama.dsp">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pygama.io.html">pygama.io package</a></li>
<li class="toctree-l3"><a class="reference internal" href="pygama.lh5.html">pygama.lh5 package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pygama.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="pygama.html#module-pygama.git">pygama.git module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pygama.html#module-pygama.utils">pygama.utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pygama.html#module-pygama">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pygama</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="pygama.html">pygama package</a> &raquo;</li>
      <li>pygama.dsp package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/pygama.dsp.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pygama-dsp-package">
<h1>pygama.dsp package<a class="headerlink" href="#pygama-dsp-package" title="Permalink to this headline"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</section>
<section id="module-pygama.dsp.ProcessingChain">
<span id="pygama-dsp-processingchain-module"></span><h2>pygama.dsp.ProcessingChain module<a class="headerlink" href="#module-pygama.dsp.ProcessingChain" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pygama.dsp.ProcessingChain.</span></span><span class="sig-name descname"><span class="pre">ProcessingChain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clock_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A ProcessingChain is used to efficiently perform a sequence of digital
signal processing (dsp) transforms. It contains a list of dsp functions and
a set of constant values and named variables contained in fixed memory
locations. When executing the ProcessingChain, processors will act on the
internal memory without allocating new memory in the process. Furthermore,
the memory is allocated in blocks, enabling vectorized processing of many
entries at once. To set up a ProcessingChain, use the following methods:
1) add_input_buffer: bind a named variable to an external numpy array to</p>
<blockquote>
<div><p>read data from</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><dl class="simple">
<dt>add_processor: add a dsp function and bind its inputs to a set of named</dt><dd><p>variables and constant values</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>add_output_buffer: bind a named variable to an external numpy array to</dt><dd><p>write data into</p>
</dd>
</dl>
</li>
</ol>
<p>When calling these methods, the ProcessingChain class will use available
information to allocate buffers to the correct sizes and data types. For
this reason, transforms will ideally implement the numpy ufunc class,
enabling broadcasting of array dimensions. If not enough information is
available to correctly allocate memory, it can be provided through the
named variable strings or by calling add_vector or add_scalar.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain.add_input_buffer">
<span class="sig-name descname"><span class="pre">add_input_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">varname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain.add_input_buffer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain.add_input_buffer" title="Permalink to this definition"></a></dt>
<dd><p>Link an input buffer to a variable. The buffer should be a numpy
ndarray with length that is a multiple of the buffer length, the block
width, and the named variable length. If any of these are unknown we
will try to deduce the right lengths. varname can be of the form:</p>
<blockquote>
<div><p>&quot;varname(length, type)[range]&quot;</p>
</div></blockquote>
<p>The optional (length, type) field is used to initialize a new variable.
The optional [range] field copies from the buffer into a subrange of the
array.</p>
<p>Optional keyword args:
- buffer_len: number of entries in buffer. This is needed if we cannot</p>
<blockquote>
<div><p>figure it out from the shape (i.e. multi-dimensional buffer fed as
a one-dimensional array)</p>
</div></blockquote>
<ul class="simple">
<li><p>dtype: data type used for the variable. Use this if the variable is
automatically allocated here, but with a different type from buff</p></li>
<li><p>unit specifies a unit to convert the input from. Unit must have same type as clk, or be a ratio to multiply the input by</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain.add_output_buffer">
<span class="sig-name descname"><span class="pre">add_output_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">varname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain.add_output_buffer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain.add_output_buffer" title="Permalink to this definition"></a></dt>
<dd><p>Link an output buffer to a variable. The buffer should be a numpy
ndarray with length that is a multiple of the buffer length, the block
width, and the named variable length. If any of these are unknown we
will try to deduce the right lengths. varname can be of the form:</p>
<blockquote>
<div><p>&quot;varname(length, type)[range]&quot;</p>
</div></blockquote>
<p>The optional (length, type) field is used to initialize a new variable.
The optional [range] field copies a subrange of the named array into the
output buffer.</p>
<p>Optional keyword args:
- buffer_len: number of entries in buffer. This is needed if we cannot</p>
<blockquote>
<div><p>figure it out from the shape (i.e. multi-dimensional buffer fed as
a one-dimensional array)</p>
</div></blockquote>
<ul class="simple">
<li><p>dtype: data type used for the variable. Use this if the variable is
automatically allocated here, but with a different type from buff</p></li>
<li><p>unit specifies a unit to convert the output into. Unit must have same type as clk, or be a ratio to divide the output by</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain.add_processor">
<span class="sig-name descname"><span class="pre">add_processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain.add_processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain.add_processor" title="Permalink to this definition"></a></dt>
<dd><p>Add a new processor and bind it to a set of parameters.
- func should be a function implementing the numpy ufunc class. If not,</p>
<blockquote>
<div><p>then the signature and types keyword arguments will be necessary.</p>
</div></blockquote>
<ul>
<li><p>args is a list of names and constants. The names link to internal
numpy array variables that will be bound to the function. Names can
be given in the form:</p>
<blockquote>
<div><p>&quot;varname(length, type)[range]&quot;</p>
</div></blockquote>
<p>The optional (length, type) field is used to initialize a new variable
if necessary. The optional [range] field copies binds only a subrange
of the array to the function. Non-string constant values will be
converted to the right type and bound to the function. Constants with
scimath time units will be converted to the internal clock unit.</p>
</li>
<li><p>keyword arguments include:
- signature: broadcasting signature for a ufunc. By default, use</p>
<blockquote>
<div><p>func.signature</p>
</div></blockquote>
<ul class="simple">
<li><p>types: a list of strings defining the types of arrays needed for
the func. By default, use func.types</p></li>
</ul>
</li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain.add_scalar">
<span class="sig-name descname"><span class="pre">add_scalar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain.add_scalar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain.add_scalar" title="Permalink to this definition"></a></dt>
<dd><p>Add named variable containing a scalar block with fixed type</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain.add_waveform">
<span class="sig-name descname"><span class="pre">add_waveform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain.add_waveform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain.add_waveform" title="Permalink to this definition"></a></dt>
<dd><p>Add named variable containing a waveform block with fixed type and length</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain.execute" title="Permalink to this definition"></a></dt>
<dd><p>Execute the dsp chain on the entire input/output buffers</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain.execute_block">
<span class="sig-name descname"><span class="pre">execute_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain.execute_block"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain.execute_block" title="Permalink to this definition"></a></dt>
<dd><p>Execute the dsp chain on a sub-set of the input/output buffers
starting at entry offset, with length equal to the internal block size.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain.get_input_buffer">
<span class="sig-name descname"><span class="pre">get_input_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">varname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain.get_input_buffer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain.get_input_buffer" title="Permalink to this definition"></a></dt>
<dd><p>Get the input buffer associated with varname. If there is no such
buffer, create one with a shape compatible with the input variable and
return it. The input varname has the form:</p>
<blockquote>
<div><p>&quot;varname(length, type)[range]&quot;</p>
</div></blockquote>
<p>The optional (length, type) field is used to initialize a new variable.
The optional [range] field copies a subrange of the named array into the
output buffer.</p>
<p>Optional keyword arguments:
- dtype can be used to specify the numpy data type of the buffer if it</p>
<blockquote>
<div><p>should differ from that held in varname</p>
</div></blockquote>
<ul class="simple">
<li><p>buffer_len specifies the buffer length, if it has not already been set</p></li>
<li><p>unit specifies a unit to convert the input from. Unit must have same type as clk, or be a ratio to multiply the input by</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain.get_output_buffer">
<span class="sig-name descname"><span class="pre">get_output_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">varname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain.get_output_buffer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain.get_output_buffer" title="Permalink to this definition"></a></dt>
<dd><p>Get the output buffer associated with varname. If there is no such
buffer, create one with a shape compatible with the input variable and
return it. The input varname has the form:</p>
<blockquote>
<div><p>&quot;varname(length, type)[range]&quot;</p>
</div></blockquote>
<p>The optional (length, type) field is used to initialize a new variable.
The optional [range] field copies a subrange of the named array into the
output buffer.</p>
<p>Optional keyword arguments:
- dtype can be used to specify the numpy data type of the buffer if it</p>
<blockquote>
<div><p>should differ from that held in varname</p>
</div></blockquote>
<ul class="simple">
<li><p>buffer_len specifies the buffer length, if it has not already been set</p></li>
<li><p>unit specifies a unit to convert the output into. Unit must have same type as clk, or be a ratio to divide the output by</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.ProcessingChain.ProcessingChain.get_variable">
<span class="sig-name descname"><span class="pre">get_variable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_names_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/ProcessingChain.html#ProcessingChain.get_variable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.ProcessingChain.ProcessingChain.get_variable" title="Permalink to this definition"></a></dt>
<dd><p>Parse string expr into a numpy array or value, using the following
syntax:</p>
<blockquote>
<div><ul>
<li><p>numeric values are parsed into ints or floats</p></li>
<li><p>units found in the dsp.units module are parsed into floats</p></li>
<li><p>other strings are parsed into variable names. If get_name_only is
False, fetch the internal buffer (creating it as needed). Else,
return a string of the name</p></li>
<li><p>if a string is followed by (...), try parsing into one of the
following expressions:</p>
<blockquote>
<div><p>len(expr): return the length of the array found with expr
round(expr): return the value found with expr to the nearest int
varname(shape, type): allocate a new buffer with the specified</p>
<blockquote>
<div><p>shape and type, using varname. This is used if the automatic
type and shape deduction for allocating variables fails</p>
</div></blockquote>
</div></blockquote>
</li>
<li><dl class="simple">
<dt>Unary and binary operators +, -, <a href="#id1"><span class="problematic" id="id2">*</span></a>, /, // are available. If</dt><dd><p>a variable name is included in the expression, a processor
will be added to the ProcChain and a new buffer allocated
to store the output</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>varname[slice]: return the variable with a slice applied. Slice</dt><dd><p>values can be floats, and will have round applied to them</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>If get_names_only is set to True, do not fetch or allocate new arrays,</dt><dd><p>instead return a list of variable names found in the expression</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-pygama.dsp.WaveformBrowser">
<span id="pygama-dsp-waveformbrowser-module"></span><h2>pygama.dsp.WaveformBrowser module<a class="headerlink" href="#module-pygama.dsp.WaveformBrowser" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pygama.dsp.WaveformBrowser.</span></span><span class="sig-name descname"><span class="pre">WaveformBrowser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lh5_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dsp_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_drawn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ns'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waveforms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'waveform'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wf_styles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend_opts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The Waveform Browser is a tool meant for interacting with waveforms from
LH5 files. This defines an interface for drawing waveforms from a file,
drawing transformed waveforms defined using raw_to_dsp style json files,
drawing horizontal and verticle lines at the values of calculated
parameters, and filling a legend with calculated parameters.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.__next__">
<span class="sig-name descname"><span class="pre">__next__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.__next__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.__next__" title="Permalink to this definition"></a></dt>
<dd><p>Call draw_next...</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.clear_data">
<span class="sig-name descname"><span class="pre">clear_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.clear_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.clear_data" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.draw_current">
<span class="sig-name descname"><span class="pre">draw_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.draw_current"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.draw_current" title="Permalink to this definition"></a></dt>
<dd><p>Draw the waveforms and data currently held internally by this class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.draw_entry">
<span class="sig-name descname"><span class="pre">draw_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.draw_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.draw_entry" title="Permalink to this definition"></a></dt>
<dd><p>Draw specified entries from file. Entry_list can be either a single value or list of values representing the index of an event within all files. If append is True, previously drawn entries will be drawn along with this one. If clear is False, the axis will not be cleared before drawing. Return the axis object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.draw_next">
<span class="sig-name descname"><span class="pre">draw_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_wfs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.draw_next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.draw_next" title="Permalink to this definition"></a></dt>
<dd><p>Draw the next n_wfs waveforms on the same axis. If a selection was set, only draw waveforms from that selection. Return a list of waveform indices drawn and the axis object:
n_wfs: number of waveforms to draw (default is self.n_wfs)
append: set to True to prevent clearing of axis before drawing
clear: set False to draw on an already defined axis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.find_entry">
<span class="sig-name descname"><span class="pre">find_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.find_entry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.find_entry" title="Permalink to this definition"></a></dt>
<dd><p>Find the requested data associated with entry in input files and
place it in self.wf_data, self.line_data and self.legend_data. Set
append to False to clear these buffers before fetching the entry/ies.
Can give a list/tuple to find multiple entries.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.find_next">
<span class="sig-name descname"><span class="pre">find_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_wfs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.find_next"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.find_next" title="Permalink to this definition"></a></dt>
<dd><p>Find the next n_wfs (default to self.n_drawn) waveforms indicated by self.selection and place them in self.wf_data, self.line_data and self.legend_data. If append is True, do not clear these buffers first.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.new_figure">
<span class="sig-name descname"><span class="pre">new_figure</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.new_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.new_figure" title="Permalink to this definition"></a></dt>
<dd><p>Create a new figure and draw in it</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.reset" title="Permalink to this definition"></a></dt>
<dd><p>Reset to the start of the file for draw_next</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.save_figure">
<span class="sig-name descname"><span class="pre">save_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f_out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.save_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.save_figure" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.WaveformBrowser.WaveformBrowser.set_figure">
<span class="sig-name descname"><span class="pre">set_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/WaveformBrowser.html#WaveformBrowser.set_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.WaveformBrowser.WaveformBrowser.set_figure" title="Permalink to this definition"></a></dt>
<dd><p>Use an already existing figure and axis; make sure to set clear to False when drawing if you don't want to clear what's already there! Can give a WaveformBrowser object to use the fig/axis from that</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-pygama.dsp.build_processing_chain">
<span id="pygama-dsp-build-processing-chain-module"></span><h2>pygama.dsp.build_processing_chain module<a class="headerlink" href="#module-pygama.dsp.build_processing_chain" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pygama.dsp.build_processing_chain.build_processing_chain">
<span class="sig-prename descclassname"><span class="pre">pygama.dsp.build_processing_chain.</span></span><span class="sig-name descname"><span class="pre">build_processing_chain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lh5_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dsp_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/build_processing_chain.html#build_processing_chain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.build_processing_chain.build_processing_chain" title="Permalink to this definition"></a></dt>
<dd><p>Produces a ProcessingChain object and an lh5 table for output parameters
from an input lh5 table and a json recipe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lh5_in</strong> (<em>lgdo.Table</em>) -- HDF5 table from which raw data is read. At least one row of entries
should be read in prior to calling this!</p></li>
<li><p><strong>dsp_config</strong> (<em>dict</em><em> or </em><em>str</em>) -- <p>A dict or json filename containing the recipes for computing DSP
parameter from raw parameters. The format is as follows:
{</p>
<blockquote>
<div><dl>
<dt>&quot;outputs&quot;<span class="classifier">[ &quot;parnames&quot;, ... ] -&gt; list of output parameters</span></dt><dd><p>to compute by default; see outputs parameter.</p>
</dd>
<dt>&quot;processors&quot;<span class="classifier">{</span></dt><dd><dl>
<dt>&quot;name1, ...&quot;<span class="classifier">{ -&gt; names of parameters computed</span></dt><dd><dl class="simple">
<dt>&quot;function&quot;<span class="classifier">str -&gt; name of function to call. Function</span></dt><dd><p>should implement the gufunc interface, a factory
function returning a gufunc, or an arbitrary
function that can be mapped onto a gufunc</p>
</dd>
</dl>
<p>&quot;module&quot; : str -&gt; name of module containing function
&quot;args&quot; : [ str or numeric, ... ] -&gt; list of names of</p>
<blockquote>
<div><p>computed and input parameters or constant values
used as inputs to function. Note that outputs
should be fed by reference as args! Arguments read
from the database are prepended with db.</p>
</div></blockquote>
<dl class="simple">
<dt>&quot;kwargs&quot;<span class="classifier">dict -&gt; keyword arguments for</span></dt><dd><p>ProcesssingChain.add_processor.</p>
</dd>
<dt>&quot;init_args&quot;<span class="classifier">[ str or numeric, ... ] -&gt; list of names</span></dt><dd><p>of computed and input parameters or constant values
used to initialize a gufunc via a factory function</p>
</dd>
</dl>
<p>&quot;unit&quot; : str or [ strs, ... ] -&gt; units for parameters
&quot;defaults&quot; : dict -&gt; default value to be used for</p>
<blockquote>
<div><p>arguments read from the database</p>
</div></blockquote>
<dl class="simple">
<dt>&quot;prereqs&quot;<span class="classifier">DEPRECATED [ strs, ...] -&gt; list of parameters</span></dt><dd><p>that must be computed before these can</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
</div></blockquote>
</p></li>
<li><p><strong>outputs</strong> (<em>[</em><em>str</em><em>, </em><em>...</em><em>] </em><em>(</em><em>optional</em><em>)</em>) -- List of parameters to put in the output lh5 table. If None,
use the parameters in the 'outputs' list from config</p></li>
<li><p><strong>db_dict</strong> (<em>dict</em><em> (</em><em>optional</em><em>)</em>) -- <p>A nested dict pointing to values for db args. e.g. if a processor
uses arg db.trap.risetime, it will look up</p>
<blockquote>
<div><p>db_dict['trap']['risetime']</p>
</div></blockquote>
<p>and use the found value. If no value is found, use the default
defined in the config file.</p>
</p></li>
<li><p><strong>verbosity</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) -- 0: Print nothing (except errors...)
1: Print basic warnings (default)
2: Print basic debug info
3: Print friggin' everything!</p></li>
<li><p><strong>block_width</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) -- number of entries to process at once. To optimize performance,
a multiple of 16 is preferred, but if performance is not an issue
any value can be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>(proc_chain, field_mask, lh5_out)</strong> -- proc_chain : ProcessingChain object that is executed
field_mask : List of input fields that are used
lh5_out : output lh5 table containing processed values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pygama.dsp.dsp_optimize">
<span id="pygama-dsp-dsp-optimize-module"></span><h2>pygama.dsp.dsp_optimize module<a class="headerlink" href="#module-pygama.dsp.dsp_optimize" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pygama.dsp.dsp_optimize.</span></span><span class="sig-name descname"><span class="pre">ParGrid</span></span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parameter Grid class</p>
<p>Each ParGrid entry corresponds to a dsp parameter to be varied.
The ntuples must follow the pattern:
( name, i_arg, value_strs, companions) : ( str, int, list of str, list, or None )
where name is the name of the dsp routine in dsp_config whose to be
optimized, i_arg is the index of the argument to be varied, value_strs is
the array of strings to set the argument to, and companions is an optional
list of ( name, i_arg, value_strs ) tuples for companion arguments that
need to change along with this one</p>
<p>Optionally, i_arg can be a list of the argument indices to be varied together,
where value_strs is a list of lists correponding to the strings to set the
arguments to in the same order.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.add_dimension">
<span class="sig-name descname"><span class="pre">add_dimension</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_strs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.add_dimension"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.add_dimension" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.get_data">
<span class="sig-name descname"><span class="pre">get_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_par</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.get_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.get_data" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.get_n_dimensions">
<span class="sig-name descname"><span class="pre">get_n_dimensions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.get_n_dimensions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.get_n_dimensions" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.get_n_grid_points">
<span class="sig-name descname"><span class="pre">get_n_grid_points</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.get_n_grid_points"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.get_n_grid_points" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.get_n_points_of_dim">
<span class="sig-name descname"><span class="pre">get_n_points_of_dim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.get_n_points_of_dim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.get_n_points_of_dim" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.get_par_meshgrid">
<span class="sig-name descname"><span class="pre">get_par_meshgrid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sparse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.get_par_meshgrid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.get_par_meshgrid" title="Permalink to this definition"></a></dt>
<dd><p>return a meshgrid of parameter values</p>
<p>Always uses Matrix indexing (natural for par grid) so that
mg[i1][i2][...] corresponds to index order in self.dims</p>
<p>Note copy is False by default as opposed to numpy default of True</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.get_shape">
<span class="sig-name descname"><span class="pre">get_shape</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.get_shape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.get_shape" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.get_zero_indices">
<span class="sig-name descname"><span class="pre">get_zero_indices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.get_zero_indices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.get_zero_indices" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.iterate_indices">
<span class="sig-name descname"><span class="pre">iterate_indices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.iterate_indices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.iterate_indices" title="Permalink to this definition"></a></dt>
<dd><p>iterate given indices [i1, i2, ...] by one.</p>
<p>For easier iteration. The convention here is arbitrary, but its the
order the arrays would be traversed in a series of nested for loops in
the order appearin in dims (first dimension is first for loop, etc):</p>
<p>Return False when the grid runs out of indices. Otherwise returns True.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.print_data">
<span class="sig-name descname"><span class="pre">print_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.print_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.print_data" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGrid.set_dsp_pars">
<span class="sig-name descname"><span class="pre">set_dsp_pars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dsp_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#ParGrid.set_dsp_pars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGrid.set_dsp_pars" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGridDimension">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pygama.dsp.dsp_optimize.</span></span><span class="sig-name descname"><span class="pre">ParGridDimension</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_strs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGridDimension" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGridDimension.companions">
<span class="sig-name descname"><span class="pre">companions</span></span><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGridDimension.companions" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGridDimension.i_arg">
<span class="sig-name descname"><span class="pre">i_arg</span></span><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGridDimension.i_arg" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGridDimension.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGridDimension.name" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.ParGridDimension.value_strs">
<span class="sig-name descname"><span class="pre">value_strs</span></span><a class="headerlink" href="#pygama.dsp.dsp_optimize.ParGridDimension.value_strs" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.run_grid">
<span class="sig-prename descclassname"><span class="pre">pygama.dsp.dsp_optimize.</span></span><span class="sig-name descname"><span class="pre">run_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tb_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dsp_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fom_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float64'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db_dict=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity=0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#run_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.run_grid" title="Permalink to this definition"></a></dt>
<dd><p>Extract a table of optimization values for a grid of DSP parameters</p>
<p>The grid argument defines a list of parameters and values over which to run
the DSP defined in dsp_config on tb_data. At each point, a scalar
figure-of-merit is extracted</p>
<p>Returns a N-dimensional ndarray of figure-of-merit values, where the array
axes are in the order they appear in grid.</p>
<dl class="simple">
<dt>tb_data<span class="classifier">lh5 Table</span></dt><dd><p>An input table of lh5 data. Typically a selection is made prior to
sending tb_data to this function: optimization typically doesn't have to
run over all data</p>
</dd>
<dt>dsp_config<span class="classifier">dict</span></dt><dd><p>Specifies the DSP to be performed (see build_processing_chain()) and the
list of output variables to appear in the output table for each grid point</p>
</dd>
<dt>grid<span class="classifier">ParGrid</span></dt><dd><p>See ParGrid class for format</p>
</dd>
<dt>fom_function<span class="classifier">function</span></dt><dd><p>When given the output lh5 table of this DSP iteration, the fom_function
must return a scalar figure-of-merit. Should accept verbosity as a
second keyword argument</p>
</dd>
<dt>dtype<span class="classifier">dtype (optional)</span></dt><dd><p>The data type of the fom_function's return object. Should be np.ndarray if
fom_function is set to None</p>
</dd>
<dt>db_dict<span class="classifier">dict (optional)</span></dt><dd><p>DSP parameters database. See build_processing_chain for formatting info</p>
</dd>
<dt>verbosity<span class="classifier">int (optional)</span></dt><dd><p>Verbosity for the processing chain and fom_function calls</p>
</dd>
</dl>
<dl class="simple">
<dt>grid_values<span class="classifier">ndarray of floats</span></dt><dd><p>An N-dimensional numpy ndarray whose Mth axis corresponds to the Mth row
of the grid argument</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pygama.dsp.dsp_optimize.run_one_dsp">
<span class="sig-prename descclassname"><span class="pre">pygama.dsp.dsp_optimize.</span></span><span class="sig-name descname"><span class="pre">run_one_dsp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tb_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dsp_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fom_function</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pygama/dsp/dsp_optimize.html#run_one_dsp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pygama.dsp.dsp_optimize.run_one_dsp" title="Permalink to this definition"></a></dt>
<dd><p>Run one iteration of DSP on tb_data</p>
<p>Optionally returns a value for optimization</p>
<dl class="simple">
<dt>tb_data<span class="classifier">lh5 Table</span></dt><dd><p>An input table of lh5 data. Typically a selection is made prior to
sending tb_data to this function: optimization typically doesn't have to
run over all data</p>
</dd>
<dt>dsp_config<span class="classifier">dict</span></dt><dd><p>Specifies the DSP to be performed for this iteration (see
build_processing_chain()) and the list of output variables to appear in
the output table</p>
</dd>
<dt>db_dict<span class="classifier">dict (optional)</span></dt><dd><p>DSP parameters database. See build_processing_chain for formatting info</p>
</dd>
<dt>fom_function<span class="classifier">function or None (optional)</span></dt><dd><p>When given the output lh5 table of this DSP iteration, the
fom_function must return a scalar figure-of-merit value upon which the
optimization will be based. Should accept verbosity as a second argument</p>
</dd>
<dt>verbosity<span class="classifier">int (optional)</span></dt><dd><p>verbosity for the processing chain and fom_function calls</p>
</dd>
</dl>
<dl class="simple">
<dt>figure_of_merit<span class="classifier">float</span></dt><dd><p>If fom_function is not None, returns figure-of-merit value for the DSP iteration</p>
</dd>
<dt>tb_out<span class="classifier">lh5 Table</span></dt><dd><p>If fom_function is None, returns the output lh5 table for the DSP iteration</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pygama.dsp.processors">
<span id="pygama-dsp-processors-module"></span><h2>pygama.dsp.processors module<a class="headerlink" href="#module-pygama.dsp.processors" title="Permalink to this headline"></a></h2>
<p>Contains a list of dsp processors used by the legend experiment, implemented
using numba's guvectorize to implement numpy's ufunc interface. In other words,
all of the functions are void functions whose outputs are given as parameters.
The ufunc interface provides additional information about the function
signatures that enables broadcasting the arrays and SIMD processing. Thanks to
the ufunc interface, they can also be called to return a numpy array, but if
this is done, memory will be allocated for this array, slowing things down.</p>
</section>
<section id="module-pygama.dsp.units">
<span id="pygama-dsp-units-module"></span><h2>pygama.dsp.units module<a class="headerlink" href="#module-pygama.dsp.units" title="Permalink to this headline"></a></h2>
</section>
<section id="module-pygama.dsp">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pygama.dsp" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pygama.analysis.html" class="btn btn-neutral float-left" title="pygama.analysis package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pygama.io.html" class="btn btn-neutral float-right" title="pygama.io package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, LEGEND Collaboration.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>